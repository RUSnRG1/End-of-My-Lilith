<!DOCTYPE html>
<html lang="ja">
    <head prefix="og: http://ogp.me/ns#">
        <script>
            // ローカル環境と本番環境を判定して <base> タグを動的に設定
            (function() {
                var baseTag = document.createElement("base");
                
                // hostname でローカル環境か本番環境かを判定
                if (location.hostname === "127.0.0.1" || location.hostname === "localhost") {
                    // ローカル環境: Live Serverなど
                    baseTag.href = "/";
                } else {
                    // 本番環境: GitHub Pagesのパス
                    baseTag.href = "/End-of-My-Lilith/";
                }
    
                // <head> に <base> タグを挿入
                document.head.appendChild(baseTag);
            })();
        </script>
        <meta charset="UTF-8">
        <meta name="auther" content="れう すずらぎ">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@RUSnRG1" />
        <meta name="twitter:title" content="End of My Lilithのブログ" id="twitter-title" />
        <meta property="og:title" content="Blog" id="page-title1"/>
        <meta property="og:description" content="blog" id="page-title2" />
        <meta property="og:image" content="https://rusnrg1.github.io/End-of-My-Lilith/images/meta.png" />
        <title id="page-title"></title><!--ここにブログタイトル入れる。タブに表示される-->
        <link rel="stylesheet" href="style.css">
        <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
        <script src="script.js"></script>
        <script src="Blog/blog_script.js"></script>
       
    </head>
    <body>
        <div id="container">
            <div class="slider-placeholder"></div>
            <div class="contentlink-placeholder"></div>
            <main>
                <div class="blog_contents">
                    <div class="blog_text">
                        <!-- タイトル -->
                        <h1 id="blog-title"></h1>
                        <p style="text-align: right" id="blog-date"></p>
                        <!-- 区切り線（将来的に画像に置き換えられる） -->
                        <div class="separator"></div>

                        <!-- Markdownの内容がここに表示されます -->
                        <div id="blog-text"></div>
                        </br>
                        </br>
                        <div class="blog_share">
                            共有⇒
                            <a
                                id="twitter-share"
                                href=""
                                target="_blank"
                                rel="nofollow noopener noreferrer"
                            >
                                <img src="images/twitter.png" alt="Twitterアイコン" class="share-icon">
                            </a>
                            <a
                                id="bluesky-share"
                                href=""
                                target="_blank"
                                rel="nofollow noopener noreferrer"
                            >
                                <img src="images/bluesky.png" alt="Blueskyアイコン" class="share-icon">
                            </a>
                        </div>

                    </div>
                    <div class="blog_description">
                        <img src="images/About.png" alt="アイコン">
                        <p><b>れう すずらぎ</b>
                        <br>
                        <font size="2">実は「れう」と「すずらぎ」の間のスペースは半角なのが正確な表記です。<br><br>
                        この下にタグ機能とか追加したいんだけどね。どう作るんだか。</font>    
                        </p>
                    </div>
                </div>
            </main>
        </div>  
        <div class="footer-placeholder"></div>

        <!-- ページ読み込み時にMarkdownファイルを指定してロード -->
        <script>
            marked.setOptions({
                breaks : true,
            });
            const urlParams = new URLSearchParams(window.location.search);
            console.log(urlParams)
            const blogPath = urlParams.get('path');
            const blogTitle = urlParams.get('title');
            const blogDate = urlParams.get('date');
            // タイトルをページ内にセット
            document.getElementById("page-title").textContent = blogTitle || "ブログ記事";
            document.getElementById("blog-title").textContent = blogTitle || "ブログ記事";
            document.getElementById("blog-date").textContent = blogDate || "１月日";

            const twitterTitleMeta = document.getElementById('twitter-title');
            twitterTitleMeta.setAttribute('content', blogTitle);

            const twitterTitleMeta2 = document.getElementById('page-title1');
            twitterTitleMeta2.setAttribute('content', blogTitle);
            const twitterTitleMeta3 = document.getElementById('page-title2');
            twitterTitleMeta3.setAttribute('content', blogTitle);
            loadMarkdown(blogPath);
        </script>
    </body>
</html>